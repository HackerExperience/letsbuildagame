extends includes/layout

block variables
  - currentPage = "contribute";
  - currentUrl = pages.contribute.baseUrl;

append scripts
  include includes/meta-tags
  +javascript("http://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.3/jquery.easing.min.js")

block content
  .container.section-subscribe
    .row
      .col-xs-12

        form#form-setup-acc.subscribe-form

          ul#progress-bar
            li.active Account setup
            li Verify email
            li Select team
            li Select tasks
            li Preferences

          fieldset
            h2.fs-title Create your account
            h3.fs-subtitle Next you'll verify your email address
            h3.fs-error

            .form-group
              input(type="text" name="username" placeholder="Username").input-username
              span.helper.input-username-help
            .form-group
              input(type="text" name="email" placeholder="Email").input-email
              span.helper.input-email-help
            .form-group
              input(type="password" name="password" placeholder="Password").input-password
              span.helper.input-password-help

            input(type="submit" name="submit" value="Create").next.action-button
            i(style="display: none;").fa.fa-spinner.fa-spin.input-loading

        form(style="display:none;")#form-verify-email.subscribe-form

          ul#progress-bar
            li.active Account setup
            li.active Verify email
            li Select team
            li Select tasks
            li Preferences

          fieldset
            h2.fs-title Verify your email address
            h3.fs-subtitle Please copy the verification code we sent to you.
            h3.fs-error

            .form-group
              input(type="text" name="email-code" placeholder="Email verification code").input-email-code
              span.helper.input-email-code

            input(type="submit" name="submit" value="Activate").next.action-button
            i(style="display: none;").fa.fa-spinner.fa-spin.input-loading


        form(style="display: none;")#form-select-contrib.subscribe-form

          ul#progress-bar
            li.active Account setup
            li.active Verify email
            li.active Select Team
            li Select Tasks
            li Preferences

          fieldset
            h2.fs-title Contribution Team
            h3.fs-subtitle Join teams you like so we can narrow down your contribution options. 
            h3.fs-subtitle.no-margin Select as many as you want. You can change these settings later.
            h3.fs-error

            .team-selector
              .row
                +team('dev', 'Development', 'code')
                +team('art', 'Design & Art', 'paint-brush')
                +team('mgt', 'Management', 'tags')
                +team('gd', 'Game Design', 'lightbulb-o')
              .row
                +team('translation', 'Translation', 'language')
                +team('patron', 'Patron', 'tag')
                +team('student', 'Student / Mentor', 'mortar-board')
                +team('gamer', 'Gamer', 'gamepad')

            input(type="submit" name="submit" value="I'm ready").next.action-button.disabled
            i(style="display: none;").fa.fa-spinner.fa-spin.input-loading


        form(style="display: none;")#form-select-tasks.subscribe-form

          ul#progress-bar
            li.active Account setup
            li.active Verify email
            li.active Select Team
            li.active Select Tasks
            li Preferences

          fieldset
            h2.fs-title Contribution Tasks
            h3.fs-subtitle Select the <strong>actions</strong> that you feel like doing. We'll describe how to perform each one later.
            h3.fs-subtitle.no-margin Subscribe to <strong>tags</strong> to receive notifications whenever we need your help on the subject.
            h3.fs-subtitle.no-margin You can (un)subscribe later. You'll set notification preferences next.
            h3.fs-error

            .task-selector
              #dev
                a#cat-dev(href="#").category
                  p Development team (42)
                    i.fa.fa-chevron-down.category-icon
                #tasks-dev
                  h1 Actions
                  .row
                    +task('submit-patches', 'Submit patches', 'code-fork')
                    +task('review-code', 'Review code', 'search')
                    +task('write-tests', 'Write tests', 'bullseye')
                    +task('write-docs', 'Write docs', 'book')
                  h1 Tags
                  h2 Workflow
                  .row
                    +task('tag-todo', 'TODO', 'tag')
                    +task('tag-waitingreview', 'WaitingReview', 'tag')
                    +task('tag-bug', 'Bug', 'tag')
                    +task('tag-discussion', 'Discussion', 'tag')

                  h2 Programming languages
                  .row
                    +task('tag-elixir', 'Elixir', 'tag')
                    +task('tag-python', 'Python', 'tag')
                    +task('tag-elm', 'Elm', 'tag')
                    +task('tag-fs', 'F#', 'tag')
                  .row
                    +task('tag-javascript', 'Javascript', 'tag')
                    +task('tag-php', 'PHP', 'tag')

                  h2 Areas of interest
                  .row
                    +task('tag-frontend', 'Frontend', 'tag')
                    +task('tag-backend', 'Backend', 'tag')
                    +task('tag-infrastructure', 'Infrastructure', 'tag')
                    +task('tag-security', 'Security', 'tag')
                  .row
                    +task('tag-optimization', 'Optimization', 'tag')
                    +task('tag-ai', 'AI', 'tag')
                    +task('tag-network', 'Network', 'tag')
                    +task('tag-databases', 'Databases', 'tag')
                  .row
                    +task('tag-pm', 'Project Mgt.', 'tag')
                    +task('tag-linux', 'Linux', 'tag')
                    +task('tag-ios', 'iOS', 'tag')
                    +task('tag-android', 'Android', 'tag')

                  h2 Game software (server & interfaces)
                  .row
                    +task('tag-core', 'Core', 'tag')
                    +task('tag-mobile', 'Mobile', 'tag')
                    +task('tag-web', 'Web', 'tag')
                    +task('tag-terminal', 'Terminal', 'tag')

                  h2 Stack Tools
                  .row
                    +task('tag-aerospike', 'Aerospike', 'tag')
                    +task('tag-consul', 'Consul', 'tag')
                    +task('tag-elastic', 'Elastic', 'tag')
                    +task('tag-docker', 'Docker', 'tag')
                  .row
                    +task('tag-kafka', 'Apache Kafka', 'tag')
                    +task('tag-samza', 'Apache Samza', 'tag')
                    +task('tag-nginx', 'nginx', 'tag')
                    +task('tag-haproxy', 'HAproxy', 'tag')
                  .row
                    +task('tag-mnesia', 'Mnesia', 'tag')
                    +task('tag-phabricator', 'Phabricator', 'tag')
                    +task('tag-postgresql', 'PostgreSQL', 'tag')
                    +task('tag-postgis', 'PostGIS', 'tag')
              #art
                a#cat-art(href="#").category
                  p Design & art team (12)
                    i.fa.fa-chevron-down.category-icon
                #tasks-art
                  h1 Actions
                  .row
                    +task('discuss-ui', 'Discuss UI', 'comments')
                    +task('design-ui', 'Design UI', 'paint-brush')
                    +task('create-assets', 'Create assets', 'image')
                    +task('review-ux', 'Review UX', 'dashboard')
                  h1 Tags
                  .row
                    +task('tag-design', 'Design', 'tag')
                    +task('tag-mobileui', 'InterfaceMobile', 'tag')
                    +task('tag-webui', 'InterfaceWeb', 'tag')
                    +task('tag-terminalui', 'InterfaceTerminal', 'tag')
                  .row
                    +task('tag-designdiscussion', 'DesignDiscussion', 'tag')
                    +task('tag-designsuggestion', 'DesignSuggestion', 'tag')
                    +task('tag-designfeedback', 'DesignFeedback', 'tag')
                    +task('tag-ux', 'UX', 'tag')
              #gd
                a#cat-gd(href="#").category
                  p Game design team (10)
                    i.fa.fa-chevron-down.category-icon
                #tasks-gd
                  h1 Actions
                  .row
                    +task('discuss-features', 'Discuss features', 'comments')
                    +task('study-game', 'Study the game', 'map')
                    +task('balance', 'Balance skills', 'balance-scale')
                    +task('design-story', 'Design the story', 'pencil')
                  h1 Tags
                  .row
                    +task('tag-storyline', 'Storyline', 'tag')
                    +task('tag-gamemechanic', 'GameMechanic', 'tag')
                    +task('tag-gamedesign', 'GameDesign', 'tag')
                    +task('tag-heep-gd', 'HEEP-GD', 'tag')
                  .row
                    +task('tag-feature', 'Feature', 'tag')
                    +task('tag-featurerequest', 'FeatureRequest', 'tag')
              #mgt
                a#cat-mgt(href="#").category
                  p Community Management team (7)
                    i.fa.fa-chevron-down.category-icon
                #tasks-mgt
                  h1 Actions
                  .row
                    +task('triage-tasks', 'Triage tasks', 'folder-open')
                    +task('guide-users', 'Guide users', 'map-signs')
                    +task('curate-content', 'Curate content', 'file-text')
                    +task('report', 'Flag & report', 'legal')
                  h1 Tags
                  .row
                    +task('tag-report', 'Report', 'tag')
                    +task('tag-meta', 'Meta', 'tag')
                    +task('tag-community', 'Community', 'tag')
              #translation
                a#cat-translation(href="#").category
                  p Translation team (5)
                    i.fa.fa-chevron-down.category-icon
                #tasks-translation
                  h1 Actions
                  .row
                    +task('translate-text', 'Translate text', 'language')
                    +task('improve-text', 'Improve text', 'paragraph')
                    +task('fix-typos', 'Fix typos', 'strikethrough')
                  h1 Tags
                  .row
                    +task('tag-typos', 'Typos', 'tag')
                    +task('tag-translationrequest', 'TranslationRequest', 'tag')

              #patron
                a#cat-patron(href="#").category
                  p Patron team (4)
                    i.fa.fa-chevron-down.category-icon
                #tasks-patron
                  h1 Actions
                  .row
                    +task('spread', 'Spread the word', 'bullhorn')
                    +task('preorder', 'Preorder', 'gift')
                    +task('rate-review', 'Rate & review', 'thumbs-up')
                    +task('invest', 'Be an investor', 'rocket')

              #student
                a#cat-student(href="#").category
                  p Student & Mentorship team (13)
                    i.fa.fa-chevron-down.category-icon
                #tasks-student
                  h1 Actions
                  .row
                    +task('follow-topics', 'Follow topics', 'rss')
                    +task('learn-code', 'Learn to code', 'road')
                    +task('study-group', 'Join study group', 'group')
                    +task('share-knowledge', 'Share knowlege', 'exchange')
                  .row
                    +task('adopt-student', 'Adopt a student', 'heart')
                    +task('answer-guide', 'Answer & guide', 'support')
                  h1 Tags
                  .row
                    +task('tag-question', 'Question', 'tag')
                    +task('tag-resource', 'Resource', 'tag')
                    +task('tag-tutorial', 'Tutorial', 'tag')
                    +task('tag-advice', 'Advice', 'tag')
                  .row
                    +task('tag-studygroup', 'StudyGroup', 'tag')
                    +task('tag-seekingmentor', 'SeekingMentor', 'tag')
                    +task('tag-seekingstudent', 'SeekingStudent', 'tag')

              #gamer
                a#cat-gamer(href="#").category
                  p Gamer team (4)
                    i.fa.fa-chevron-down.category-icon
                #tasks-gamer
                  h1 Actions
                  .row
                    +task('play', 'Play the game', 'gamepad')
                    +task('become-tester', 'Become a tester', 'flask')
                    +task('submit-ideas', 'Submit ideas ', 'lightbulb-o')
                    +task('report-bugs', 'Report bugs', 'bug')

              #other
                a#cat-other(href="#").category
                  p Miscellaneous (7)
                    i.fa.fa-chevron-down.category-icon
                #tasks-other
                  h1 Actions
                  .row
                    +task('music', 'Compose music', 'music')
                    +task('offer-service', 'Offer a service', 'suitcase')
                  h1 Tags
                  .row
                    +task('tag-marketing', 'Marketing', 'tag')
                    +task('tag-legal', 'Legal', 'tag')
                    +task('tag-social-media', 'Social Media', 'tag')
                    +task('tag-crm', 'CRM', 'tag')
                  .row
                    +task('tag-soundtrack', 'Soundtrack', 'tag')
                  h2 Suggest other ways you can contribute to the game
                  .row
                    .col-xs-12
                      input#custom-actions(type="text" name="custom-actions")

            input(type="submit" name="submit" value="Let's go").next.action-button
            i(style="display: none;").fa.fa-spinner.fa-spin.input-loading

        form(style="display: none;")#form-select-preferences.subscribe-form

          ul#progress-bar
            li.active Account setup
            li.active Verify email
            li.active Select team
            li.active Select tasks
            li.active Preferences

          fieldset
            h2.fs-title Notification preferences
            h3.fs-subtitle We will compile into <em>one</em> email all tasks and tags you are interested in.
            h3.fs-subtitle.no-margin Important discussions will be highlighted, and you can always view more tasks.
            h3.fs-subtitle.no-margin You can unsubscribe or change preferences at any time.
            h3.fs-error

            .form-group
              label(for="email-frequency").col-sm-2.control-label Frequency

              .col-sm-10
                select(name="email-frequency" autocomplete="off").form-control.email-frequency
                  option(value="0") Never
                  option(value="1x1") One email per day
                  option(value="2x7" selected="selected") Two emails per week
                  option(value="1x7") One email per week
                  option(value="2x30") Two emails per month
                  option(value="1x30") One email per month
                span.helper.input-email-code

              span.help-block Select how often we can send an email with interesting discussions related to your tasks.

            .form-group

              label(for="email-frequency").col-sm-2.control-label Notifications

              .col-sm-10
                label.checkbox-group
                  input(type="checkbox" value="important_updates").notification-input 
                  span Send me <em>important</em> news about the project
                label.checkbox-group
                  input(type="checkbox" value="step4_starts").notification-input
                  span Tell me when Step 4 (Development) starts
                label.checkbox-group
                  input(type="checkbox" value="game_released" checked="checked" autocomplete="off").notification-input
                  span Tell me when the game gets released

            input(type="submit" name="submit" value="Finish setup").next.action-button
            i(style="display: none;").fa.fa-spinner.fa-spin.input-loading

mixin tooltip-span(text)
  span(data-hint= text).hint--large.tooltip-span
    if block
      block

mixin label-selected
  span(title="").label.label-check.fa.fa-check

mixin label-unselected
  span(title="").label.label-check.fa  

mixin tooltip-submit-patches

mixin task(task_id, name, icon)
  - var div_id = 'task-' + task_id

  .col-xs-3
    +tooltip-span(tooltips.tasks[task_id])
      div(id="#{div_id}").task
        .col-xs-2
          i(class="fa fa-" + icon)
        .col-xs-9
          span.task-name= name
      span.error-helper 

mixin team(team_id, name, icon)
  - var div_id = 'team-' + team_id
  .col-xs-3
    +tooltip-span(tooltips.teams[team_id])
      div(id="#{div_id}").team        
          i(class="fa fa-" + icon)
          h1= name
